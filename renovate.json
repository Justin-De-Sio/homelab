{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "flux": {
    "managerFilePatterns": [".*ya?ml$"]
  },
  "hostRules": [
    {
      "matchHost": "registry.gitlab.com",
      "hostType": "docker",
      "username": "process.env.DOCKER_REGISTRY_GITLAB_COM_USERNAME",
      "password": "process.env.DOCKER_REGISTRY_GITLAB_COM_PASSWORD"
    }
  ],
  "packageRules": [
    {
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "matchPackagePatterns": ["registry\\.gitlab\\.com/justin-de-sio/990prep"],
      "pinDigests": true,
      "automerge": true,
      "automergeType": "pr"
    }
  ],
  "regexManagers": [
    {
      "fileMatch": [".*\\.ya?ml$"],
      "matchStrings": [
        "image:\\s*(?<depName>[^:\\s]+(?:/[^:\\s]+)*):(?<currentValue>[^\\s]+)",
        "image:\\s*(?<depName>[^@\\s]+)@(?<currentDigestAlgo>sha256):(?<currentDigestValue>[a-f0-9]{64})"
      ],
      "datasourceTemplate": "docker"
    }
  ]
}