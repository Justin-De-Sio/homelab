@startuml
title <size:24>990prep - System Context (Level 1)</size>\n<size:24>Shows 990prep and its relationships with users and external systems</size>

set separator none
top to bottom direction
skinparam ranksep 60
skinparam nodesep 30
hide stereotype

<style>
  root {
    BackgroundColor: #ffffff;
    FontColor: #444444;
  }
  // Element,Person,User
  .Element-RWxlbWVudCxQZXJzb24sVXNlcg== {
    BackgroundColor: #08427b;
    LineColor: #052e56;
    LineStyle: 0;
    LineThickness: 2;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Element,Software System
  .Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0= {
    BackgroundColor: #1168bd;
    LineColor: #0b4884;
    LineStyle: 0;
    LineThickness: 2;
    RoundCorner: 20;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Element,Software System,External System
  .Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt {
    BackgroundColor: #999999;
    LineColor: #6b6b6b;
    LineStyle: 0;
    LineThickness: 2;
    RoundCorner: 20;
    FontColor: #ffffff;
    FontSize: 24;
    HorizontalAlignment: center;
    Shadowing: 0;
    MaximumWidth: 450;
  }
  // Relationship
  .Relationship-UmVsYXRpb25zaGlw {
    LineThickness: 2;
    LineStyle: 10-10;
    LineColor: #444444;
    FontColor: #444444;
    FontSize: 24;
  }
</style>

person "==Nonprofit Staff\n<size:16>[Person]</size>\n\nExecutive directors and finance staff at nonprofit organizations who need to file Form 990" <<Element-RWxlbWVudCxQZXJzb24sVXNlcg==>> as NonprofitStaff
person "==Accountant/CPA\n<size:16>[Person]</size>\n\nTax professionals who prepare Form 990 returns for nonprofit clients" <<Element-RWxlbWVudCxQZXJzb24sVXNlcg==>> as AccountantCPA
rectangle "==IRS\n<size:16>[Software System]</size>\n\nInternal Revenue Service - receives Form 990 filings" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt>> as IRS
rectangle "==Stripe\n<size:16>[Software System]</size>\n\nPayment processing platform for subscription billing" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt>> as Stripe
rectangle "==Supabase\n<size:16>[Software System]</size>\n\nBackend-as-a-Service providing PostgreSQL database and authentication" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt>> as Supabase
rectangle "==PostHog\n<size:16>[Software System]</size>\n\nProduct analytics and feature flag platform" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt>> as PostHog
rectangle "==TikTok Ads\n<size:16>[Software System]</size>\n\nAdvertising platform for conversion tracking" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt>> as TikTokAds
rectangle "==GitLab Registry\n<size:16>[Software System]</size>\n\nContainer registry hosting Docker images" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0sRXh0ZXJuYWwgU3lzdGVt>> as GitLabRegistry
rectangle "==990prep\n<size:16>[Software System]</size>\n\nSaaS platform that helps nonprofits and accountants prepare and file IRS Form 990 tax returns" <<Element-RWxlbWVudCxTb2Z0d2FyZSBTeXN0ZW0=>> as 990prep

990prep --> Supabase <<Relationship-UmVsYXRpb25zaGlw>> : "Reads/writes organization data, form drafts, user accounts\n<size:16>[HTTPS/PostgreSQL]</size>"
NonprofitStaff --> 990prep <<Relationship-UmVsYXRpb25zaGlw>> : "Prepares and submits Form 990"
AccountantCPA --> 990prep <<Relationship-UmVsYXRpb25zaGlw>> : "Manages client 990 filings"
990prep --> IRS <<Relationship-UmVsYXRpb25zaGlw>> : "Submits completed Form 990 (future e-file)\n<size:16>[HTTPS]</size>"
990prep --> Stripe <<Relationship-UmVsYXRpb25zaGlw>> : "Processes subscription payments\n<size:16>[HTTPS/API]</size>"
990prep --> Supabase <<Relationship-UmVsYXRpb25zaGlw>> : "Stores data and handles auth\n<size:16>[HTTPS]</size>"
990prep --> PostHog <<Relationship-UmVsYXRpb25zaGlw>> : "Sends analytics events\n<size:16>[HTTPS]</size>"
990prep --> TikTokAds <<Relationship-UmVsYXRpb25zaGlw>> : "Sends conversion pixels\n<size:16>[HTTPS]</size>"
GitLabRegistry --> 990prep <<Relationship-UmVsYXRpb25zaGlw>> : "Deploys container images\n<size:16>[Docker Pull]</size>"

@enduml